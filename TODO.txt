1. handle recursive functions
2. shift variables into implicit reference base